<div class="fico-calculator">
  <h1 class="fico-calculator__title">Калькулятор FICO</h1>

  <form
    class="fico-calculator__form"
    (ngSubmit)="onSubmit()"
    #ficoForm="ngForm"
  >
    <div class="fico-calculator__field" *ngFor="let field of fields">
      <label class="fico-calculator__field-label" [for]="field.id">
        {{ field.label }}
      </label>
      <div class="fico-calculator__field-description">
        {{ field.description }}
      </div>
      <input
        type="number"
        class="fico-calculator__field-input"
        [id]="field.id"
        [(ngModel)]="formData[field.id]"
        [name]="field.id"
        [min]="field.min"
        required
      />
    </div>

    <div class="fico-calculator__checkboxes">
      <h2 class="fico-calculator__checkboxes-title">Поточний статус володіння житлом</h2>
      <div
        class="fico-calculator__checkboxes-item"
        *ngFor="let option of ownershipOptions"
      >
        <input
          type="radio"
          [id]="option.id"
          [(ngModel)]="formData['home_ownership']"
          [value]="option.id"
          name="home_ownership"
        />
        <label [for]="option.id">{{ option.label }}</label>
      </div>
    </div>

    <div class="fico-calculator__error" *ngIf="errorMessage">
      {{ errorMessage }}
    </div>

    <button
      type="submit"
      class="fico-calculator__button"
      [disabled]="!ficoForm.form.valid || isLoading"
    >
      Генерувати
    </button>
  </form>

  <div *ngIf="ficoScore !== null" class="fico-calculator__result">
    <div class="fico-calculator__score">
      Ваш FICO Score: {{ ficoScore | number:'1.0-0' }}
    </div>

    <div class="fico-calculator__recommendations" *ngIf="recommendations.length">
      <h2>Рекомендації:</h2>
      <ul>
        <li *ngFor="let recommendation of recommendations">
          {{ recommendation.message }}
        </li>
      </ul>
    </div>
  </div>
</div>
